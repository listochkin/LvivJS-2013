<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <link rel="stylesheet" href="css/styles.css">
    </head>
    <body>

        <h2>Knockout</h2>
        <p><span data-bind="text: count">0</span> Twits loaded</p>
        <ul data-bind="foreach: tweets">
            <li>
                <p>@<span data-bind="text: user.name"></span> at <span data-bind="text: created_at"></span></p>
                <p data-bind="text: text"></p>
            </li>
        </ul>

        <script src="js/vendor.js"></script>

        <script>
            window.addEventListener('message', function (message) {
                vm.tweets.unshift(JSON.parse(message.data));
            });

            window.vm = new function ViewModel () {
                this.tweets = ko.observableArray([]);
                this.count = ko.computed(function () {
                    return this.tweets().length;
                }.bind(this));
            };

            ko.applyBindings(vm);
        </script>
    </body>
</html>
